<!--
  GraVITas Premier League <gravitaspremierleague@gmail.com>
  Copyright (C) 2014  IEEE Computer Society - VIT Student Chapter <ieeecs@vit.ac.in>

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <title>Dashboard | GPL</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <!-- build:css(.) styles/vendor.css -->
        <!-- bower:css -->
        <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.css"/>
        <!-- endbower -->
        <!-- endbuild -->
        <!-- build:css(.tmp) styles/main.css -->
        <link rel="stylesheet" href="/stylesheets/dashboard.css">
        <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
        <!-- endbuild -->
    </head>
    <body>
        <!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
            your browser</a> to improve your experience.</p>
        <![endif]-->
        <div id="wrapper" class="container-fluid">
            <div id="side-navigation">
                <div id="sidenav" class="affix col-sm-2 col-xs-4 hidden-xs full-height">
                    <div class="container-fluid">
                        <ul class="nav nav-pills nav-stacked wrapper  ">
                            <img src="/images/gpllogo.png" class="img-responsive" style="margin: 5px;padding-right:10px;">
                            <li role="presentation"><a href="/home">Home</a></li>
                            <li role="presentation" class="active"><a href="/home/dashboard">Dashboard</a></li>
                            <li role="presentation"><a href="/home/team">Team</a></li>
                            <li role="presentation"><a href="/home/matches">Matches</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="main-content" class="col-xs-12 col-sm-10 col-sm-offset-2 full-width">
                <div id="top-navigation"></div>
                <div class="container-fluid wrapper stats-view">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 col-xs-12">
                                <div class="card card-green">
                                    <div class="card-content wide">
                                        <h3>Run Rate <br/>
                                            <small>Matches v/s Run Rate</small>
                                        </h3>
                                        <div class="chart-container">
                                            <canvas id="line-chart" class=""></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 col-xs-12">
                                <div class="card card-green">
                                    <div class="card-content wide">
                                        <h3>Runs scored and conceded <br/>
                                            <small>Overs v/s Runs</small>
                                        </h3>
                                        <div class="chart-container">
                                            <canvas id="bar-chart" class=""></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 col-xs-12">
                                <div class="card card-green">
                                    <div class="card-content wide">
                                        <h3>Points History <br/>
                                            <small>Matches v/s Points</small>
                                        </h3>
                                        <div class="chart-container">
                                            <canvas id="win-loss" class=""></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 col-xs-12">
                                <div class="card card-green">
                                    <div class="card-content wide">
                                        <h3>Boundaries <br/>
                                            <small>Sixes v/s Fours</small>
                                        </h3>
                                        <div class="chart-container">
                                            <canvas id="pie-chart" class=""></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- build:js(.) scripts/vendor.js -->
        <!-- bower:js -->
        <script src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script src="/bower_components/chartjs/Chart.js"></script>
        <!-- endbower -->
        <!-- endbuild -->
        <!-- build:js(.) scripts/plugins.js -->
        <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- endbuild -->
        <!-- build:js({app,.tmp}) scripts/main.js -->
        <script src="/javascript/playerCommon.js"></script>
        <script>
            var json_data = <%- JSON.stringify(result) %>;
            function string_range(start, stop) {
                var string_array = [];
                for (i = start; i <= stop; i++) {
                    string_array.push(i.toString());
                }
                return string_array;
            }

            Chart.defaults.global.responsive = true;

            var run_rate = []
            for (i = 0; i < json_data.scores.length; i++)
            {
                run_rate.push(json_data.scores[i] / overs[i]);
            }

            var line = $("#line-chart").get(0).getContext("2d");
            var line_data =
            {
                labels: string_range(1, run_rate.length),
                datasets:
                [
                    {
                        label: "Run rate",
                        fillColor: "rgba(7, 51, 58,0.2)",
                        strokeColor: "transparent",
                        pointColor: "rgba(220,220,220,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: run_rate
                    }
                ]
            };

            var myLineChart = new Chart(line).Line(line_data, {scaleShowGridLines: false});
            var bar = $("#bar-chart").get(0).getContext("2d");
            var bar_data =
            {
                labels: string_range(1, json_data.scored_per_over.length),
                datasets:
                [
                    {
                        label: "Runs scored",
                        fillColor: "rgba(7, 51, 58,0.2)",
                        strokeColor: "transparent",
                        highlightFill: "rgba(220,220,220,1)",
                        highlightStroke: "transparent",
                        data: json_data.scored_per_over
                    },
                    {
                        label: "Runs given",
                        fillColor: "rgba(19,131,148,0.2)",
                        strokeColor: "transparent",
                        highlightFill: "rgba(151,187,205,1)",
                        highlightStroke: "transparent",
                        data: json_data.conceded_per_over
                    }
                ]
            };

            var myBarChart = new Chart(bar).Bar(bar_data, {scaleShowGridLines: false});
            var winloss = $("#win-loss").get(0).getContext("2d");
            var winloss_data =
            {
                labels: string_range(1, json_data.progression.length),
                datasets:
                [
                    {
                        label: "Points",
                        fillColor: "rgba(19,131,148,0.2)",
                        strokeColor: "transparent",
                        pointColor: "rgba(220,220,220,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: json_data.progression
                    }
                ]
            };

            var myLineChart2 = new Chart(winloss).Line(winloss_data, {bezierCurveTension: 0, scaleShowGridLines: false});
            var pie = $("#pie-chart").get(0).getContext("2d");
            var pie_data =
            [
                {
                    value: json_data.fours,
                    color: "rgba(7, 51, 58,0.2)",
                    highlight: "rgba(7, 51, 58,0.5)",
                    label: "Fours"
                },
                {
                    value: json_data.sixes,
                    color: "rgba(19,131,148,0.2)",
                    highlight: "rgba(19,131,148,0.5)",
                    label: "Sixes"
                }
            ];

            var myPieChart = new Chart(pie).Pie(pie_data);
        </script>
        <!-- endbuild -->
    </body>
</html>