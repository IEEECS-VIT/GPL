(function(e){var l=window;if(!Object.keys){Object.keys=(function(){var w=Object.prototype.hasOwnProperty,x=!({toString:null}).propertyIsEnumerable("toString"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=v.length;return function(A){if(typeof A!=="object"&&(typeof A!=="function"||A===null)){throw new TypeError("Object.keys called on non-object")}var y=[],B,z;for(B in A){if(w.call(A,B)){y.push(B)}}if(x){for(z=0;z<u;z++){if(w.call(A,v[z])){y.push(v[z])}}}return y}}())}var c=false;var f=200;var m=(location.hash==="#debug");function d(u){if(m){console.log(u)}}var o=["Days","Hours","Minutes","Seconds"];var q={Seconds:"Minutes",Minutes:"Hours",Hours:"Days",Days:"Years"};var r={Seconds:1,Minutes:60,Hours:3600,Days:86400,Months:2678400,Years:31536000};function s(w){var v=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;w=w.replace(v,function(y,A,z,x){return A+A+z+z+x+x});var u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return u?{r:parseInt(u[1],16),g:parseInt(u[2],16),b:parseInt(u[3],16)}:null}function g(){var u=document.createElement("canvas");return !!(u.getContext&&u.getContext("2d"))}function b(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function n(){return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(v){var u=this.length>>>0;var w=Number(arguments[1])||0;w=(w<0)?Math.ceil(w):Math.floor(w);if(w<0){w+=u}for(;w<u;w++){if(w in this&&this[w]===v){return w}}return -1}}function h(z){var v=z.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{1,2}:[0-9]{2}:[0-9]{2}$/);if(v!==null&&v.length>0){var x=z.split(" ");var u=x[0].split("-");var w=x[1].split(":");return new Date(u[0],u[1]-1,u[2],w[0],w[1],w[2])}var y=Date.parse(z);if(!isNaN(y)){return y}y=Date.parse(z.replace(/-/g,"/").replace("T"," "));if(!isNaN(y)){return y}return new Date()}function j(I,K,F,B,A){var D={};var C={};var v={};var J={};var E={};var z={};var x=null;for(var y=0;y<B.length;y++){var H=B[y];var w;if(x===null){w=F/r[H]}else{w=r[x]/r[H]}var u=(I/r[H]);var G=(K/r[H]);if(A){if(u>0){u=Math.floor(u)}else{u=Math.ceil(u)}if(G>0){G=Math.floor(G)}else{G=Math.ceil(G)}}if(H!=="Days"){u=u%w;G=G%w}D[H]=u;v[H]=Math.abs(u);C[H]=G;z[H]=Math.abs(G);J[H]=Math.abs(u)/w;E[H]=Math.abs(G)/w;x=H}return{raw_time:D,raw_old_time:C,time:v,old_time:z,pct:J,old_pct:E}}var p={};function k(){if(typeof l.TC_Instance_List!=="undefined"){p=l.TC_Instance_List}else{l.TC_Instance_List=p}a(l)}function a(v){var y=["webkit","moz"];for(var u=0;u<y.length&&!v.requestAnimationFrame;++u){v.requestAnimationFrame=v[y[u]+"RequestAnimationFrame"];v.cancelAnimationFrame=v[y[u]+"CancelAnimationFrame"]}if(!v.requestAnimationFrame||!v.cancelAnimationFrame){v.requestAnimationFrame=function(C,z,w){if(typeof w==="undefined"){w={data:{last_frame:0}}}var x=new Date().getTime();var A=Math.max(0,16-(x-w.data.last_frame));var B=v.setTimeout(function(){C(x+A)},A);w.data.last_frame=x+A;return B};v.cancelAnimationFrame=function(w){clearTimeout(w)}}}var i=function(v,u){this.element=v;this.container;this.listeners=null;this.data={paused:false,last_frame:0,animation_frame:null,interval_fallback:null,timer:false,total_duration:null,prev_time:null,drawn_units:[],text_elements:{Days:null,Hours:null,Minutes:null,Seconds:null},attributes:{canvas:null,context:null,item_size:null,line_width:null,radius:null,outer_radius:null},state:{fading:{Days:false,Hours:false,Minutes:false,Seconds:false}}};this.config=null;this.setOptions(u);this.initialize()};i.prototype.clearListeners=function(){this.listeners={all:[],visible:[]}};i.prototype.addTime=function(u){if(this.data.attributes.ref_date instanceof Date){var v=this.data.attributes.ref_date;v.setSeconds(v.getSeconds()+u)}else{if(!isNaN(this.data.attributes.ref_date)){this.data.attributes.ref_date+=(u*1000)}}};i.prototype.initialize=function(B){this.data.drawn_units=[];for(var x=0;x<Object.keys(this.config.time).length;x++){var D=Object.keys(this.config.time)[x];if(this.config.time[D].show){this.data.drawn_units.push(D)}}e(this.element).children("div.time_circles").remove();if(typeof B==="undefined"){B=true}if(B||this.listeners===null){this.clearListeners()}this.container=e("<div>");this.container.addClass("time_circles");this.container.appendTo(this.element);var F=this.element.offsetHeight;var v=this.element.offsetWidth;if(F===0){F=e(this.element).height()}if(v===0){v=e(this.element).width()}if(F===0&&v>0){F=v/this.data.drawn_units.length}else{if(v===0&&F>0){v=F*this.data.drawn_units.length}}var C=document.createElement("canvas");C.width=v;C.height=F;this.data.attributes.canvas=e(C);this.data.attributes.canvas.appendTo(this.container);var A=g();if(!A&&typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(C);c=true;A=true}if(A){this.data.attributes.context=C.getContext("2d")}this.data.attributes.item_size=Math.min(v/this.data.drawn_units.length,F);this.data.attributes.line_width=this.data.attributes.item_size*this.config.fg_width;this.data.attributes.radius=((this.data.attributes.item_size*0.8)-this.data.attributes.line_width)/2;this.data.attributes.outer_radius=this.data.attributes.radius+0.5*Math.max(this.data.attributes.line_width,this.data.attributes.line_width*this.config.bg_width);var x=0;for(var E in this.data.text_elements){if(!this.config.time[E].show){continue}var u=e("<div>");u.addClass("textDiv_"+E);u.css("top",Math.round(0.35*this.data.attributes.item_size));u.css("left",Math.round(x++*this.data.attributes.item_size));u.css("width",this.data.attributes.item_size);u.appendTo(this.container);var y=e("<h4>");y.text(this.config.time[E].text);y.css("font-size",Math.round(this.config.text_size*this.data.attributes.item_size));y.css("line-height",Math.round(this.config.text_size*this.data.attributes.item_size)+"px");y.appendTo(u);var w=e("<span>");w.css("font-size",Math.round(3*this.config.text_size*this.data.attributes.item_size));w.css("line-height",Math.round(this.config.text_size*this.data.attributes.item_size)+"px");w.appendTo(u);this.data.text_elements[E]=w}this.start();if(!this.config.start){this.data.paused=true}var z=this;this.data.interval_fallback=l.setInterval(function(){z.update.call(z,true)},100)};i.prototype.update=function(z){if(typeof z==="undefined"){z=false}else{if(z&&this.data.paused){return}}if(c){this.data.attributes.context.clearRect(0,0,this.data.attributes.canvas[0].width,this.data.attributes.canvas[0].hright)}var D,K;var L=this.data.prev_time;var N=new Date();this.data.prev_time=N;if(L===null){L=N}if(!this.config.count_past_zero){if(N>this.data.attributes.ref_date){for(var I=0;I<this.data.drawn_units.length;I++){var O=this.data.drawn_units[I];this.data.text_elements[O].text("0");var C=(I*this.data.attributes.item_size)+(this.data.attributes.item_size/2);var B=this.data.attributes.item_size/2;var F=this.config.time[O].color;this.drawArc(C,B,F,0)}this.stop();return}}D=(this.data.attributes.ref_date-N)/1000;K=(this.data.attributes.ref_date-L)/1000;var J=this.config.animation!=="smooth";var u=j(D,K,this.data.total_duration,this.data.drawn_units,J);var v=j(D,K,r.Years,o,J);var I=0;var G=0;var A=null;var H=this.data.drawn_units.slice();for(var I in o){var O=o[I];if(Math.floor(v.raw_time[O])!==Math.floor(v.raw_old_time[O])){this.notifyListeners(O,Math.floor(v.time[O]),Math.floor(D),"all")}if(H.indexOf(O)<0){continue}if(Math.floor(u.raw_time[O])!==Math.floor(u.raw_old_time[O])){this.notifyListeners(O,Math.floor(u.time[O]),Math.floor(D),"visible")}if(!z){this.data.text_elements[O].text(Math.floor(Math.abs(u.time[O])));var C=(G*this.data.attributes.item_size)+(this.data.attributes.item_size/2);var B=this.data.attributes.item_size/2;var F=this.config.time[O].color;if(this.config.animation==="smooth"){if(A!==null&&!c){if(Math.floor(u.time[A])>Math.floor(u.old_time[A])){this.radialFade(C,B,F,1,O);this.data.state.fading[O]=true}else{if(Math.floor(u.time[A])<Math.floor(u.old_time[A])){this.radialFade(C,B,F,0,O);this.data.state.fading[O]=true}}}if(!this.data.state.fading[O]){this.drawArc(C,B,F,u.pct[O])}}else{this.animateArc(C,B,F,u.pct[O],u.old_pct[O],(new Date()).getTime()+f)}}A=O;G++}if(this.data.paused||z){return}var E=this;var w=function(){E.update.call(E)};if(this.config.animation==="smooth"){this.data.animation_frame=l.requestAnimationFrame(w,E.element,E)}else{var M=(D%1)*1000;if(M<0){M=1000+M}M+=50;E.data.animation_frame=l.setTimeout(function(){E.data.animation_frame=l.requestAnimationFrame(w,E.element,E)},M)}};i.prototype.animateArc=function(D,B,w,v,C,A){if(this.data.attributes.context===null){return}var E=C-v;if(Math.abs(E)>0.5){if(v===0){this.radialFade(D,B,w,1)}else{this.radialFade(D,B,w,0)}}else{var u=(f-(A-(new Date()).getTime()))/f;if(u>1){u=1}var F=(C*(1-u))+(v*u);this.drawArc(D,B,w,F);if(u>=1){return}var z=this;l.requestAnimationFrame(function(){z.animateArc(D,B,w,v,C,A)},this.element)}};i.prototype.drawArc=function(D,C,v,E){if(this.data.attributes.context===null){return}var A=Math.max(this.data.attributes.outer_radius,this.data.attributes.item_size/2);if(!c){this.data.attributes.context.clearRect(D-A,C-A,A*2,A*2)}if(this.config.use_background){this.data.attributes.context.beginPath();this.data.attributes.context.arc(D,C,this.data.attributes.radius,0,2*Math.PI,false);this.data.attributes.context.lineWidth=this.data.attributes.line_width*this.config.bg_width;this.data.attributes.context.strokeStyle=this.config.circle_bg_color;this.data.attributes.context.stroke()}var B,u,F;var z=(-0.5*Math.PI);var G=2*Math.PI;B=z+(this.config.start_angle/360*G);var w=(2*E*Math.PI);if(this.config.direction==="Both"){F=false;B-=(w/2);u=B+w}else{if(this.config.direction==="Clockwise"){F=false;u=B+w}else{F=true;u=B-w}}this.data.attributes.context.beginPath();this.data.attributes.context.arc(D,C,this.data.attributes.radius,B,u,F);this.data.attributes.context.lineWidth=this.data.attributes.line_width;this.data.attributes.context.strokeStyle=v;this.data.attributes.context.stroke()};i.prototype.radialFade=function(C,B,v,D,E){var A=s(v);var z=this;var u=0.2*((D===1)?-1:1);var w;for(w=0;D<=1&&D>=0;w++){(function(){var x=50*w;var y="rgba("+A.r+", "+A.g+", "+A.b+", "+(Math.round(D*10)/10)+")";l.setTimeout(function(){z.drawArc(C,B,y,1)},x)}());D+=u}if(typeof E!==undefined){l.setTimeout(function(){z.data.state.fading[E]=false},50*w)}};i.prototype.timeLeft=function(){if(this.data.paused&&typeof this.data.timer==="number"){return this.data.timer}var u=new Date();return((this.data.attributes.ref_date-u)/1000)};i.prototype.start=function(){l.cancelAnimationFrame(this.data.animation_frame);l.clearTimeout(this.data.animation_frame);var v=e(this.element).data("date");if(typeof v==="undefined"){v=e(this.element).attr("data-date")}if(typeof v==="string"){this.data.attributes.ref_date=h(v)}else{if(typeof this.data.timer==="number"){if(this.data.paused){this.data.attributes.ref_date=(new Date()).getTime()+(this.data.timer*1000)}}else{var u=e(this.element).data("timer");if(typeof u==="undefined"){u=e(this.element).attr("data-timer")}if(typeof u==="string"){u=parseFloat(u)}if(typeof u==="number"){this.data.timer=u;this.data.attributes.ref_date=(new Date()).getTime()+(u*1000)}else{this.data.attributes.ref_date=this.config.ref_date}}}this.data.paused=false;this.update.call(this)};i.prototype.restart=function(){this.data.timer=false;this.start()};i.prototype.stop=function(){if(typeof this.data.timer==="number"){this.data.timer=this.timeLeft(this)}this.data.paused=true;l.cancelAnimationFrame(this.data.animation_frame)};i.prototype.destroy=function(){this.clearListeners();this.stop();l.clearInterval(this.data.interval_fallback);this.data.interval_fallback=null;this.container.remove();e(this.element).removeAttr("data-tc-id");e(this.element).removeData("tc-id")};i.prototype.setOptions=function(u){if(this.config===null){this.default_options.ref_date=new Date();this.config=e.extend(true,{},this.default_options)}e.extend(true,this.config,u);if(this.config.use_top_frame){l=window.top}else{l=window}k();this.data.total_duration=this.config.total_duration;if(typeof this.data.total_duration==="string"){if(typeof r[this.data.total_duration]!=="undefined"){this.data.total_duration=r[this.data.total_duration]}else{if(this.data.total_duration==="Auto"){for(var v=0;v<Object.keys(this.config.time).length;v++){var w=Object.keys(this.config.time)[v];if(this.config.time[w].show){this.data.total_duration=r[q[w]];break}}}else{this.data.total_duration=r.Years;console.error("Valid values for TimeCircles config.total_duration are either numeric, or (string) Years, Months, Days, Hours, Minutes, Auto")}}}};i.prototype.addListener=function(w,u,v){if(typeof w!=="function"){return}if(typeof v==="undefined"){v="visible"}this.listeners[v].push({func:w,scope:u})};i.prototype.notifyListeners=function(x,z,w,v){for(var u=0;u<this.listeners[v].length;u++){var y=this.listeners[v][u];y.func.apply(y.scope,[x,z,w])}};i.prototype.default_options={ref_date:new Date(),start:true,animation:"smooth",count_past_zero:true,circle_bg_color:"#60686F",use_background:true,fg_width:0.1,bg_width:1.2,text_size:0.07,total_duration:"Auto",direction:"Clockwise",use_top_frame:false,start_angle:0,time:{Days:{show:true,text:"Days",color:"#FC6"},Hours:{show:true,text:"Hours",color:"#9CF"},Minutes:{show:true,text:"Minutes",color:"#BFB"},Seconds:{show:true,text:"Seconds",color:"#F99"}}};var t=function(v,u){this.elements=v;this.options=u;this.foreach()};t.prototype.getInstance=function(x){var u;var w=e(x).data("tc-id");if(typeof w==="undefined"){w=n();e(x).attr("data-tc-id",w)}if(typeof p[w]==="undefined"){var v=this.options;var y=e(x).data("options");if(typeof y==="string"){y=JSON.parse(y)}if(typeof y==="object"){v=e.extend(true,{},this.options,y)}u=new i(x,v);p[w]=u}else{u=p[w];if(typeof this.options!=="undefined"){u.setOptions(this.options)}}return u};t.prototype.addTime=function(u){this.foreach(function(v){v.addTime(u)})};t.prototype.foreach=function(v){var u=this;this.elements.each(function(){var w=u.getInstance(this);if(typeof v==="function"){v(w)}});return this};t.prototype.start=function(){this.foreach(function(u){u.start()});return this};t.prototype.stop=function(){this.foreach(function(u){u.stop()});return this};t.prototype.restart=function(){this.foreach(function(u){u.restart()});return this};t.prototype.rebuild=function(){this.foreach(function(u){u.initialize(false)});return this};t.prototype.getTime=function(){return this.getInstance(this.elements[0]).timeLeft()};t.prototype.addListener=function(v,u){if(typeof u==="undefined"){u="visible"}var w=this;this.foreach(function(x){x.addListener(v,w.elements,u)});return this};t.prototype.destroy=function(){this.foreach(function(u){u.destroy()});return this};t.prototype.end=function(){return this.elements};e.fn.TimeCircles=function(u){return new t(this,u)}}(jQuery));